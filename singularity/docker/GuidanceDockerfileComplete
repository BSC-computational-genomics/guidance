FROM ubuntu:18.04

ARG DEBIAN_FRONTEND=noninteractive

ENV TERM linux

RUN echo 'debconf debconf/frontend select Noninteractive' | debconf-set-selections

#RUN apt-get update && \
#    update-alternatives --remove "java" "/usr/lib/jvm/java-11-openjdk-amd64/bin/java" && \
#    update-alternatives --remove "java" "/usr/lib/jvm/java-11-openjdk-amd64/bin/javac" && \
#    update-alternatives --remove "java" "/usr/lib/jvm/java-11-openjdk-amd64/bin/javaws" && \
#    rm -rf /usr/lib/jvm/java-1.11.0-openjdk-amd64 && \
#    apt-get purge openjdk-8-jre openjdk-8-jre-headless openjdk-7-jre gcj-4.7-base gcj-4.7-jre openjdk-6-jre-headless && \
#    apt-get remove openjdk* && \
#    apt-get remove --auto-remove openjdk* && \
#    apt-get purge openjdk* && \
#    apt-get purge --auto-remove openjdk* && \
#    apt-get autoremove openjdk-11-jre openjdk-11-jdk

RUN apt-get update && \
    apt-get remove openjdk-\* icedtea-\* icedtea6-\* && \
    apt-get remove openjdk-11-jre openjdk-11-jdk openjdk-11-jre-headless openjdk-11-jdk-headless && \
    apt-get purge openjdk-* && \
    apt-get install -y --no-install-recommends openjdk-8-jdk && \
    update-alternatives --install /usr/bin/java java /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java 9999 && \ 
    rm -rf /var/lib/apt/lists/*

#RUN apt-get update && \
#    update-alternatives --remove "java" "/usr/lib/jvm/java-11-openjdk-amd64/bin/java" && \
#    update-alternatives --remove "java" "/usr/lib/jvm/java-11-openjdk-amd64/bin/javac" && \
#    update-alternatives --remove "java" "/usr/lib/jvm/java-11-openjdk-amd64/bin/javaws" && \
#    rm -rf /usr/lib/jvm/java-1.11.0-openjdk-amd64 && \
#    apt-get purge openjdk-8-jre openjdk-8-jre-headless openjdk-7-jre gcj-4.7-base gcj-4.7-jre openjdk-6-jre-headless && \
#    apt-get remove openjdk* && \
#    apt-get remove --auto-remove openjdk* && \
#    apt-get purge openjdk* && \
#    apt-get purge --auto-remove openjdk* && \
#    apt-get remove openjdk-11-jre openjdk-11-jdk openjdk-11-jre-headless openjdk-11-jdk-headless

RUN ln -s /usr/lib/jvm/java-8-openjdk-amd64 /usr/lib/jvm/default-java

ENV LC_ALL "C"
#ENV PLINKBINARY "/TOOLS/plink_1.9/plink"
#ENV EAGLEBINARY "/TOOLS/Eagle_v2.3/eagle"
#ENV IMPUTE2BINARY "/TOOLS/impute_v2.3.2_x86_64_static/impute2"
#ENV QCTOOLBINARY "/TOOLS/qctool_v1.4-linux-x86_64/qctool
#ENV SNPTESTBINARY "/TOOLS/snptest_v2.5_linux_x86_64_static/snptest_v2.5"
#ENV MINIMACBINARY "/TOOLS/Minimac3/bin/Minimac3"
ENV RSCRIPTDIR "/TOOLS/R_scripts/"
ENV SHAPEITBINARY "/TOOLS/shapeit.v2.r727.linux.x64"
#ENV MINIMACBINARY "/TOOLS/Minimac3/bin/Minimac3"

ENV PLINKBINARY "/usr/bin/plink"
ENV QCTOOLBINARY "/usr/bin/qctool1.4"
ENV EAGLEBINARY "/usr/bin/eagle"
ENV IMPUTE2BINARY "/usr/bin/impute2"
ENV QCTOOLBINARY "/usr/bin/qctool1.4"
ENV SNPTESTBINARY "/usr/bin/snptest_v2.5"
ENV MINIMAC3BINARY "/usr/bin/minimac3"
ENV MINIMAC4BINARY "/usr/bin/minimac4"

ENV RSCRIPTBINDIR "/usr/bin/"

ENV BCFTOOLSBINARY "/usr/bin/bcftools"
#ENV QCTOOLSNEWBINARY "/gpfs/scratch/pr1ees00/pr1ees14/GCAT/SHAPEIT_IMPUTE/qctool/build/release/qctool_v2.0-rc9"
#ENV QCTOOLSNEWBINARY "/usr/bin/qctool2.0" ## THE INSTALLATION IS NOT PERFORMED BECAUSE THIS BINARY IS NOT USED IN THE CODE
ENV SAMTOOLSBINARY "/usr/bin/samtools"
